<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Draggable GIFs</title>
    <style>
        .gif-container {
    position: absolute;
    z-index: -999;
    }
    .gif-container img {
    pointer-events: none;
    }    
    .small img {
    width: 125px;
    height: 125px;
    pointer-events: none;
    }
    input{
    width: 60px;
    }
    .img-name{
      float:right;
      width: 200px;
      text-align: right;
    }
    img, input {
      vertical-align: middle;
    }
    </style>
</head>

<body>
    Global Frame Change: <input type=text id="global-text-box" value="00" /> <button id='global-minus'>-</button><button id='global-plus'>+</button> <button id="toggle-all-images">Image Size Change</button> <a href="?size=small">Grid Smaller Images</a> <a href="?size=large">Grid Larger Images</a> - Hold Control and Drag image to bring them to top
    <div id="container">
    </div>
    <script>
    var cur_img_size = 500;
    var cols = 5;

    // check if the URL contains a "size" parameter
    var urlParams = new URLSearchParams(window.location.search);
    var imageSizeParam = urlParams.get('size');

    // if the "size" parameter exists, set the image size accordingly
    if (imageSizeParam === 'small') {
        cur_img_size = 250;
        cols = 10;
    }

    var numBlocks = 250;
    var container = document.getElementById("container");
    for (var i = 1; i <= numBlocks; i++) {
        var metadata = {"1": "Incoherent Hypercube","2": "Ghostly Cuboid","3": "Temporary Cuboid","4": "Asymmetrical Cube","5": "Stable Tesseract","6": "Peaking Square","7": "Infinity Strip","8": "Illuminated Cube","9": "Flux Box","10": "Molten Mobius","11": "Pandora's Box","12": "Square Wave","13": "Entangled Tesseract","14": "Perpetual Hypercube","15": "Foggy Tesseract","16": "Red Square","17": "Rippling Tesseract","18": "Untethered Tensoract","19": "Vibrating Hypercube","20": "Unfocused 4-Qube","21": "Twisted Loop","22": "Spirited Tesseract","23": "Vaporous Tesseract","24": "Forgotten 4-Qube","25": "Mesmerizing Qube","26": "Glitched Tesseract","27": "Exothermic Hypercube","28": "Combustable Quad","29": "Foaming 4-Qube","30": "Farewell Square","31": "Photonic 4-Cube","32": "Evanescent Square","33": "Interwoven Square","34": "Fluid Mobius","35": "Exotic Tesseract","36": "Speckled Tesseract","37": "Ancient skullGAN","38": "Shifty Square","39": "Bound Tesseract","40": "Dynamic Cube","41": "Mutating Tesseract","42": "Plasma Line","43": "Lustrous Cuboid","44": "Intertwined Tesseract","45": "Galactic Hypercube","46": "Tethered Tesseract","47": "Colorful Hypercube","48": "Colliding Hypercube","49": "Bending Tesseract","50": "Intangible Tesseract","51": "Spotted Tesseract","52": "Wavering Hypercube","53": "Broken Square","54": "Unbound 4-Cube","55": "Unstable Tesseract","56": "Electrified 4-Cube","57": "Agitated Mobius","58": "Adaptive Tensoract","59": "Hyper Loop","60": "Diffused Hypercube","61": "Probing Hypercube","62": "Gamma Qube","63": "Defective Tesseract","64": "Slip Box","65": "Synthetic Tesseract","66": "Jitter Qube","67": "Impermanent Hypercube","68": "Tumultuous Tesseract","69": "Chaotic Quad","70": "Rendered Square","71": "Catalytic Qube","72": "Erupting Cube","73": "Eerie Cuboid","74": "Heavenly Cuboid","75": "Transposed Tesseract","76": "Primary Hypercube","77": "Ionic Tesseract","78": "Vibrant Cube","79": "Breathing Cube","80": "Transluscent Tesseract","81": "Puzzling Hypercube","82": "Iridescent Hypercube","83": "Fractured Quad","84": "Blurry Tesseract","85": "Reactive Square","86": "Tainted Tesseract","87": "Linked Tesseract","88": "Interdimensional Mobius","89": "Raging Hypercube","90": "Tangled Tesseract","91": "Fractal 4-Cube","92": "Ethereal Cuboid","93": "Irregular 4-Cube","94": "Uncanny Tesseract","95": "Stereo Tesseract","96": "Cryptic Hypercube","97": "Vacillating 4-Cube","98": "Parralel Line","99": "Distorted Square","100": "Quasinormal 4-Qube","101": "Holographic Hypercube","102": "Omnidimensional Cube","103": "Vacuum Qube","104": "Fluctuating Quanta","105": "Postdigital 4-Cube","106": "Blood Line","107": "Death Spiral","108": "Resolute Hypercube","109": "Echo Line","110": "Unfolding Square","111": "Gazing 1x1x1","112": "Robust Cuboid","113": "Fundamental 4-Qube","114": "Indeterminate Cuboid","115": "Noisy Square","116": "Spooky Hypercube","117": "Faulty Cube","118": "Lost Square","119": "Babylon Cuboid","120": "Ruinous Square","121": "Burnt Tesseract","122": "Dying Cuboid","123": "Organic Cuboid","124": "Doppel Square","125": "Entrapped Qube","126": "Exploding Hypercube","127": "Symmetrical 4-Cube","128": "Entrancing Tesseract","129": "Corinthian Hypercube","130": "Imploding 4-Cube","131": "Memory Square","132": "Hidden Hypercube","133": "Flowing 4-Qube","134": "Dancing Cuboid","135": "Static Tesseract","136": "Shy Tesseract","137": "Viral 4-Qube","138": "Quirky Qube","139": "Potential Hypercube","140": "Roaming Tesseract","141": "Fused Hypercube","142": "Decoherent Hypercube","143": "Vanishing Box","144": "Radiating Tesseract","145": "Twin Cuboid","146": "Enlocked Tesseract","147": "Collapsing Hypercube","148": "Expanding Tesseract","149": "Abandoned Hypercube","150": "Dendritic Tensoract","151": "Transforming Tesseract","152": "Critical 4-Cube","153": "Ambiguous Cuboid","154": "Flat Line","155": "Tempestuous Tesseract","156": "Atomic Tesseract","157": "Oscillating Cuboid","158": "Neon Hypercube","159": "Cosmic Singularity","160": "Paper Mobius","161": "Nascent Tesseract","162": "Liquid Tesseract","163": "Unsteady Cuboid","164": "Native Tesseract","165": "Spectral Tesseract","166": "Mutable Cube","167": "Peculiar Line","168": "Scattered Tesseract","169": "Interactive Tesseract","170": "Synaptic Cuboid","171": "Sparkling Hypercube","172": "Resonating Square","173": "Foreboding Hypercube","174": "Incandescent Hypercube","175": "Turbulent Tesseract","176": "Mercurial Hypercube","177": "Creeping Cuboid","178": "Transient Square","179": "Remote Cube","180": "Interfering Cuboid","181": "Rolling Cube","182": "Folding Mobius","183": "Endless Loop","184": "Tempermental Square","185": "Unified Tesseract","186": "Shimmering Square","187": "Boundless Tesseract","188": "Digital Tensoract","189": "Star Box","190": "Excitable Square","191": "Fuzzy 4-Cube","192": "Interstellar Cuboid","193": "Color Box","194": "Feedback Loop","195": "Glare Square","196": "Irrational 4-Cube","197": "Volatile 4-Cube","198": "Vivid Qube","199": "Tessellated Tesseract","200": "Flipping 4-Cube","201": "Decaying Mobius","202": "Unsettled Tensoract","203": "Cubed Cuboid","204": "Ephemeral Cuboid","205": "Lucid Qube","206": "Binary Square","207": "Evolving Cuboid","208": "Gaseous Tesseract","209": "Imperfect Circuit","210": "Seer's Square","211": "Indefinite Cuboid","212": "Primeval Tesseract","213": "Prismatic Cuboid","214": "Still Tensoract","215": "Double Slit","216": "Eternal Qube","217": "Uncertain Tesseract","218": "Opaque 4-Cube","219": "Shattered Tesseract","220": "Soothing Cuboid","221": "Artificial Line","222": "Nullified Square","223": "Complex Qube","224": "Primordial Square","225": "Chained Tesseract","226": "Luminous Qube","227": "Roving Square","228": "Erratic Cuboid","229": "Fading 4-Cube","230": "Shadow Box","231": "Charmed Qube","232": "Anomalous Tesseract","233": "Pulsating Hypercube","234": "Delusional Tesseract","235": "Primitive Tesseract","236": "Tragic Tesseract","237": "Radiant Cube","238": "Wandering Tesseract","239": "Tokenized Tesseract","240": "Glowing Hypercube","241": "Relativity Box","242": "Bubble Box","243": "Mirrored Mobius","244": "Fleeting Tesseract","245": "Spinning Tesseract","246": "Eccentric Cube","247": "Neuronal Cuboid","248": "Smoky Tensoract","249": "Mystical Mobius","250": "Paired Square"};
        var tripleDigit = ("000" + i).slice(-3);
        var newDiv = document.createElement("div");
        newDiv.className = "gif-container";

        // set position style with random top and left values
        newDiv.style.position = "absolute";
        newDiv.style.top = Math.floor((cur_img_size+40) * Math.floor((i - 1) / cols)) + 50 + cur_img_size * 4 + "px";
        newDiv.style.left = Math.floor((cur_img_size+10) * ((i - 1) % cols)) +25+ "px";

        // create the image tag and set its attributes
        var img = document.createElement("img");
        img.id = "img" + tripleDigit;
        img.src = "images/thumb" + tripleDigit + "_frame00.gif";
        img.width = cur_img_size;
        img.height = cur_img_size;

        // create the HTML code for the new div
        newDiv.innerHTML = '<button id="down' + tripleDigit + '">-</button><input id="input' + tripleDigit + '" type="text" value="00" /><button id="up' + tripleDigit + '">+</button><input value="' + tripleDigit + '" disabled /><br>';
        newDiv.appendChild(img);
        newDiv.innerHTML = newDiv.innerHTML + '<br><input value="' + metadata[i] + '" class="img-name" disabled />';

        // add the new div to the container element
        container.appendChild(newDiv);
    }

    const containers = document.querySelectorAll('.gif-container');
    var textboxes = document.querySelectorAll("input[type='text'][id^='input']");
    var upButtons = document.querySelectorAll("button[id^='up']");
    var downButtons = document.querySelectorAll("button[id^='down']");
    let activeContainer = null;
    let running_z = -998;

    function onDragStart(event) {
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'BUTTON') {
            return
        }
        activeContainer = event.target.closest('.gif-container');
    }

    function onDragEnd(event) {
        activeContainer = null;
        running_z++;
    }

    function onDrag(event) {
        if (activeContainer) {
            event.preventDefault();
            const x = event.pageX;
            const y = event.pageY;
            activeContainer.style.left = (x - cur_img_size / 2) + 'px';
            activeContainer.style.top = (y - cur_img_size / 2) + 'px';
            if (event.ctrlKey) {
                activeContainer.style.top = '50px';
            }
            activeContainer.style.zIndex = running_z;
        }
    }

    function updateImage(event) {
        var textbox = event.target;
        var image = document.getElementById("img" + event.target.id.slice(5, 9));
        var newValue = image.src.slice(0, -6) + textbox.value + ".gif";
        image.src = newValue;
    }
    containers.forEach(container => {
        container.addEventListener('mousedown', onDragStart);
    });
    textboxes.forEach(textbox => {
        textbox.addEventListener('change', updateImage);
    });

    window.addEventListener('mousemove', onDrag);
    window.addEventListener('mouseup', onDragEnd);

    function createUpClickHandler(textBox) {
        return function() {
            var currentValue = parseInt(textBox.value);
            if (currentValue < 54) {
                currentValue++;
                textBox.value = ("00" + currentValue).slice(-2);
                var changeEvent = new Event("change");
                textBox.dispatchEvent(changeEvent);
            }
        };
    }

    function createDownClickHandler(textBox) {
        return function() {
            var currentValue = parseInt(textBox.value);
            if (currentValue > 0) {
                currentValue--;
                textBox.value = ("00" + currentValue).slice(-2);
                var changeEvent = new Event("change");
                textBox.dispatchEvent(changeEvent);
            }
        };
    }


    for (var i = 0; i < upButtons.length; i++) {
        var upButton = upButtons[i];
        var downButton = downButtons[i];
        var textBox = textboxes[i];

        upButton.addEventListener("click", createUpClickHandler(textBox));
        downButton.addEventListener("click", createDownClickHandler(textBox));
    }

    var globalTextBox = document.getElementById("global-text-box");

    globalTextBox.addEventListener("change", function() {
        var globalValue = parseInt(globalTextBox.value);
        // loop through all the other text boxes and update their values
        for (var i = 0; i < textboxes.length; i++) {
            var textBox = textboxes[i];
            textBox.value = ("00" + globalValue).slice(-2);
            var changeEvent = new Event("change");
            textBox.dispatchEvent(changeEvent);
        }
    });

    var globalPlus = document.getElementById("global-plus");
    var globalMinus = document.getElementById("global-minus");

    globalPlus.addEventListener("click", createUpClickHandler(globalTextBox));
    globalMinus.addEventListener("click", createDownClickHandler(globalTextBox));

    var toggleAllBtn = document.getElementById('toggle-all-images');
    toggleAllBtn.addEventListener('click', function() {
        var images = document.querySelectorAll('.gif-container img');
        for (var j = 0; j < images.length; j++) {
            if (!images[j].style.width || images[j].style.width === '500px') {
                images[j].style.width = '250px';
                images[j].style.height = '250px';
                cur_img_size = 250;
            } else {
                images[j].style.width = '500px';
                images[j].style.height = '500px';
                cur_img_size = 500;
            }
        }
    });
    </script>
</body>

</html>